"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[442],{41442:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});a(62010),a(9868);var r=function(){var e=this,t=e._self._c;return t("page-header-wrapper",{scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"page-header-content"},[t("div",{staticClass:"content"},[t("div",{staticClass:"content-title"},[e._v(" "+e._s(e.event.name)+" ")]),t("div",{staticClass:"event-meta"},[t("span",[t("a-icon",{attrs:{type:"environment"}}),e._v(" "+e._s(e.event.location))],1),t("span",[t("a-icon",{attrs:{type:"calendar"}}),e._v(" "+e._s(e.formatDate(e.event.startTime))+" - "+e._s(e.formatDate(e.event.endTime)))],1),t("span",[t("a-icon",{attrs:{type:"user"}}),e._v(" "+e._s(e.event.creator))],1)])])])]},proxy:!0}])},[t("div",{staticClass:"main-content"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[t("a-row",{staticStyle:{"margin-bottom":"24px"},attrs:{gutter:24}},[t("a-col",{attrs:{xl:16,lg:14,md:24,sm:24,xs:24}},[t("a-card",{style:{height:"360px"},attrs:{title:"赛事信息",bordered:!1}},[t("a-descriptions",{attrs:{column:2}},[t("a-descriptions-item",{attrs:{label:"赛事名称"}},[e._v(e._s(e.event.name))]),t("a-descriptions-item",{attrs:{label:"创建人"}},[e._v(e._s(e.event.creator))]),t("a-descriptions-item",{attrs:{label:"赛事地点"}},[e._v(e._s(e.event.location))]),t("a-descriptions-item",{attrs:{label:"预计人数"}},[e._v(e._s(e.event.expectedParticipants)+" 人")]),t("a-descriptions-item",{attrs:{label:"赛事时间",span:2}},[e._v(" "+e._s(e.formatDate(e.event.startTime))+" - "+e._s(e.formatDate(e.event.endTime))+" ")]),t("a-descriptions-item",{attrs:{label:"赛事状态",span:2}},[t("a-tag",{attrs:{color:e.getStatusColor(e.event.status)}},[e._v(" "+e._s(e.getStatusText(e.event.status))+" ")])],1)],1),t("div",{staticClass:"start-event-section"},[t("p",[e._v("确认所有设置无误后，可以开始赛事")]),t("a-button",{attrs:{type:"danger",size:"large",disabled:!e.canStartEvent},on:{click:e.startEvent}},[t("a-icon",{attrs:{type:"play-circle"}}),e._v(" 开始赛事 ")],1)],1)],1)],1),t("a-col",{attrs:{xl:8,lg:10,md:24,sm:24,xs:24}},[t("a-card",{style:{height:"360px"},attrs:{title:"赛事状态",bordered:!1}},[t("div",{staticClass:"status-panel"},[t("div",{staticClass:"status-item"},[t("div",{staticClass:"status-label"},[e._v("当前状态")]),t("div",{staticClass:"status-value"},[t("a-tag",{attrs:{color:e.getStatusColor(e.event.status)}},[e._v(" "+e._s(e.getStatusText(e.event.status))+" ")])],1)]),t("div",{staticClass:"status-item"},[t("div",{staticClass:"status-label"},[e._v("已添加队伍")]),t("div",{staticClass:"status-value"},[e._v(e._s(e.teams.length)+" / "+e._s(e.event.expectedParticipants/4))])]),t("div",{staticClass:"status-item"},[t("div",{staticClass:"status-label"},[e._v("辩题设置")]),t("div",{staticClass:"status-value"},[t("a-tag",{attrs:{color:e.debateTopics.length>0?"green":"orange"}},[e._v(" "+e._s(e.debateTopics.length>0?"已设置":"未设置")+" ")])],1)]),t("div",{staticClass:"status-item"},[t("div",{staticClass:"status-label"},[e._v("规则设置")]),t("div",{staticClass:"status-value"},[t("a-tag",{attrs:{color:e.rules.openingTime?"green":"orange"}},[e._v(" "+e._s(e.rules.openingTime?"已设置":"未设置")+" ")])],1)])])])],1)],1),t("a-card",{staticStyle:{"margin-bottom":"24px"},attrs:{title:"队伍管理",bordered:!1}},[t("div",{staticClass:"team-actions"},[t("a-button",{attrs:{type:"primary"},on:{click:e.showAddTeamModal}},[t("a-icon",{attrs:{type:"plus"}}),e._v(" 添加队伍 ")],1)],1),t("a-table",{staticStyle:{"margin-top":"16px"},attrs:{columns:e.teamColumns,"data-source":e.teams,pagination:{pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条记录")}},"row-key":"id",scroll:{x:1200}},scopedSlots:e._u([{key:"members",fn:function(a){return t("span",{},e._l(a,function(a,r){return t("a-tag",{key:r,staticStyle:{margin:"2px"},attrs:{color:"blue"}},[e._v(" "+e._s(a.role)+"辩："+e._s(a.member)+" ")])}),1)}},{key:"slogan",fn:function(a){return t("span",{},[t("a-tooltip",{attrs:{title:a}},[t("span",[e._v(e._s(a&&a.length>20?a.substring(0,20)+"...":a))])])],1)}},{key:"round",fn:function(a,r){return t("span",{},[e.getTeamTopic(r.name)?t("span",[t("a-tag",{attrs:{color:"orange"}},[e._v(e._s(e.getTeamTopic(r.name).round)+"轮")])],1):t("span",[e._v("未分配")])])}},{key:"topic",fn:function(a,r){return t("span",{},[e.getTeamTopic(r.name)?t("span",[t("div",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.getTeamTopic(r.name).topic))])]):t("span",[e._v("未分配辩题")])])}},{key:"actions",fn:function(a,r){return t("span",{},[t("a",{on:{click:function(t){return e.editTeam(r)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-popconfirm",{attrs:{title:"确定要删除这个队伍吗？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.removeTeam(r.id)}}},[t("a",{staticStyle:{color:"#ff4d4f"}},[e._v("删除")])])],1)}}])})],1),t("a-card",{staticStyle:{"margin-bottom":"24px"},attrs:{title:"辩题对应队伍",bordered:!1}},[t("a-table",{staticStyle:{"margin-top":"16px"},attrs:{columns:e.debateTopicColumns,"data-source":e.debateTopics,pagination:{pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条记录")}},"row-key":"round",scroll:{x:1e3}},scopedSlots:e._u([{key:"proTeam",fn:function(a,r){return t("span",{},[t("div",{staticClass:"team-info"},[t("div",{staticClass:"team-name"},[e._v(e._s(r.proTeam.name))]),t("div",{staticClass:"team-order"},[e._v("编码: "+e._s(r.proTeam.order))]),t("div",{staticClass:"team-leader"},[e._v("队长: "+e._s(r.proTeam.leader))])])])}},{key:"conTeam",fn:function(a,r){return t("span",{},[t("div",{staticClass:"team-info"},[t("div",{staticClass:"team-name"},[e._v(e._s(r.conTeam.name))]),t("div",{staticClass:"team-order"},[e._v("编码: "+e._s(r.conTeam.order))]),t("div",{staticClass:"team-leader"},[e._v("队长: "+e._s(r.conTeam.leader))])])])}},{key:"topic",fn:function(a,r){return t("span",{},[t("div",{staticClass:"topic-info"},[t("div",{staticClass:"topic-text"},[e._v(e._s(r.topic))]),t("div",{staticClass:"positions"},[t("div",{staticClass:"pro-position"},[e._v("正方: "+e._s(r.proPosition))]),t("div",{staticClass:"con-position"},[e._v("反方: "+e._s(r.conPosition))])])])])}}])})],1),t("a-card",{staticStyle:{"margin-bottom":"24px"},attrs:{title:"辩论赛时间规则配置",bordered:!1}},[t("div",{staticClass:"config-container"},[t("div",{staticClass:"config-section"},[t("h3",[e._v("开篇立论（共4分钟）")]),t("div",{staticClass:"config-row"},[t("div",{staticClass:"config-item"},[t("label",[e._v("正方一辩立论时间（分钟）")]),t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.5,max:5,step:.5},on:{change:e.updateTotalTime},model:{value:e.rules.openingProTime,callback:function(t){e.$set(e.rules,"openingProTime",t)},expression:"rules.openingProTime"}})],1),t("div",{staticClass:"config-item"},[t("label",[e._v("反方一辩立论时间（分钟）")]),t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.5,max:5,step:.5},on:{change:e.updateTotalTime},model:{value:e.rules.openingConTime,callback:function(t){e.$set(e.rules,"openingConTime",t)},expression:"rules.openingConTime"}})],1)])]),t("div",{staticClass:"config-section"},[t("h3",[e._v("攻辩环节（共8分钟）")]),t("div",{staticClass:"config-row"},[t("div",{staticClass:"config-item"},[t("label",[e._v("攻辩环节时间（分钟）")]),t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.5,max:5,step:.5},on:{change:e.updateTotalTime},model:{value:e.rules.crossExaminationTime,callback:function(t){e.$set(e.rules,"crossExaminationTime",t)},expression:"rules.crossExaminationTime"}})],1)]),t("p",{staticClass:"config-note"},[e._v("攻辩环节共4个回合，每回合时间相同")])]),t("div",{staticClass:"config-section"},[t("h3",[e._v("自由辩论（共10分钟）")]),t("div",{staticClass:"config-row"},[t("div",{staticClass:"config-item"},[t("label",[e._v("双方各分配时间（分钟）")]),t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:30,step:.5},on:{change:e.updateTotalTime},model:{value:e.rules.freeDebateTime,callback:function(t){e.$set(e.rules,"freeDebateTime",t)},expression:"rules.freeDebateTime"}})],1)])]),t("div",{staticClass:"config-section"},[t("h3",[e._v("总结陈词（共6分钟）")]),t("div",{staticClass:"config-row"},[t("div",{staticClass:"config-item"},[t("label",[e._v("反方四辩总结时间（分钟）")]),t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.5,max:5,step:.5},on:{change:e.updateTotalTime},model:{value:e.rules.summaryConTime,callback:function(t){e.$set(e.rules,"summaryConTime",t)},expression:"rules.summaryConTime"}})],1),t("div",{staticClass:"config-item"},[t("label",[e._v("正方四辩总结时间（分钟）")]),t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.5,max:5,step:.5},on:{change:e.updateTotalTime},model:{value:e.rules.summaryProTime,callback:function(t){e.$set(e.rules,"summaryProTime",t)},expression:"rules.summaryProTime"}})],1)])]),t("div",{staticClass:"config-section"},[t("h3",[e._v("现场观众和评委提问（共3分钟）")]),t("div",{staticClass:"config-row"},[t("div",{staticClass:"config-item"},[t("label",[e._v("提问及回答总时间（分钟）")]),t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.5,max:10,step:.5},on:{change:e.updateTotalTime},model:{value:e.rules.qaTime,callback:function(t){e.$set(e.rules,"qaTime",t)},expression:"rules.qaTime"}})],1)])]),t("div",{staticClass:"config-section"},[t("h3",[e._v("预设配置")]),t("div",{staticClass:"preset-buttons"},[t("a-button",{attrs:{type:"primary"},on:{click:e.applyStandardConfig}},[e._v("应用标准配置")]),t("a-button",{on:{click:e.applyCustomConfig}},[e._v("应用自定义配置")]),t("a-button",{on:{click:e.resetConfig}},[e._v("重置为默认配置")])],1)]),t("div",{staticClass:"total-time"},[t("h3",[e._v("总时间估算："+e._s(e.totalTime.toFixed(1))+" 分钟")]),t("div",{class:["time-status",e.totalTime>45?"warning":e.totalTime>50?"error":"normal"]},[e._v(" "+e._s(e.totalTime>50?"总时间过长":e.totalTime>45?"总时间偏长":"总时间合理")+" ")])])]),t("div",{staticStyle:{"text-align":"center","margin-top":"24px"}},[t("a-button",{attrs:{type:"primary",size:"large"},on:{click:e.saveRules}},[e._v("保存规则设置")])],1)])],1)],1)],1),t("a-modal",{attrs:{title:e.currentTeam?"编辑队伍":"添加队伍",visible:e.teamModalVisible,width:600},on:{ok:e.handleTeamModalOk,cancel:e.handleTeamModalCancel}},[t("a-form",{attrs:{form:e.teamForm}},[t("a-form-item",{attrs:{label:"队伍名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入队伍名称"}]}],expression:"['name', { rules: [{ required: true, message: '请输入队伍名称' }] }]"}],attrs:{placeholder:"请输入队伍名称"}})],1),t("a-form-item",{attrs:{label:"队伍类型"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:"pro",rules:[{required:!0,message:"请选择队伍类型"}]}],expression:"['type', { initialValue: 'pro', rules: [{ required: true, message: '请选择队伍类型' }] }]"}]},[t("a-select-option",{attrs:{value:"pro"}},[e._v("正方")]),t("a-select-option",{attrs:{value:"con"}},[e._v("反方")])],1)],1),t("a-form-item",{attrs:{label:"队长姓名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["leader",{rules:[{required:!0,message:"请输入队长姓名"}]}],expression:"['leader', { rules: [{ required: true, message: '请输入队长姓名' }] }]"}],attrs:{placeholder:"请输入队长姓名"}})],1),t("a-form-item",{attrs:{label:"辩手信息"}},[t("a-row",{attrs:{gutter:8}},[t("a-col",{attrs:{span:6}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["member1",{rules:[{required:!0,message:"请输入1辩姓名"}]}],expression:"['member1', { rules: [{ required: true, message: '请输入1辩姓名' }] }]"}],attrs:{placeholder:"1辩"}})],1),t("a-col",{attrs:{span:6}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["member2",{rules:[{required:!0,message:"请输入2辩姓名"}]}],expression:"['member2', { rules: [{ required: true, message: '请输入2辩姓名' }] }]"}],attrs:{placeholder:"2辩"}})],1),t("a-col",{attrs:{span:6}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["member3",{rules:[{required:!0,message:"请输入3辩姓名"}]}],expression:"['member3', { rules: [{ required: true, message: '请输入3辩姓名' }] }]"}],attrs:{placeholder:"3辩"}})],1),t("a-col",{attrs:{span:6}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["member4",{rules:[{required:!0,message:"请输入4辩姓名"}]}],expression:"['member4', { rules: [{ required: true, message: '请输入4辩姓名' }] }]"}],attrs:{placeholder:"4辩"}})],1)],1)],1),t("a-form-item",{attrs:{label:"队伍口号"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["slogan"],expression:"['slogan']"}],attrs:{placeholder:"请输入队伍口号"}})],1)],1)],1)],1)},s=[],n=a(2403),i=a(76338);a(52675),a(89463),a(40875),a(10287),a(26099);function o(e,t,a,r){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}o=function(e,t,a,r){function n(t,a){o(e,t,function(e){return this._invoke(t,a,e)})}t?s?s(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(n("next",0),n("throw",1),n("return",2))},o(e,t,a,r)}function m(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",s=a.toStringTag||"@@toStringTag";function n(a,r,s,n){var m=r&&r.prototype instanceof c?r:c,l=Object.create(m.prototype);return o(l,"_invoke",function(a,r,s){var n,o,m,c=0,l=s||[],u=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,a){return n=t,o=0,m=e,d.n=a,i}};function p(a,r){for(o=a,m=r,t=0;!u&&c&&!s&&t<l.length;t++){var s,n=l[t],p=d.p,v=n[2];a>3?(s=v===r)&&(m=n[(o=n[4])?5:(o=3,3)],n[4]=n[5]=e):n[0]<=p&&((s=a<2&&p<n[1])?(o=0,d.v=r,d.n=n[1]):p<v&&(s=a<3||n[0]>r||r>v)&&(n[4]=a,n[5]=r,d.n=v,o=0))}if(s||a>1)return i;throw u=!0,r}return function(s,l,v){if(c>1)throw TypeError("Generator is already running");for(u&&1===l&&p(l,v),o=l,m=v;(t=o<2?e:m)||!u;){n||(o?o<3?(o>1&&(d.n=-1),p(o,m)):d.n=m:d.v=m);try{if(c=2,n){if(o||(s="next"),t=n[s]){if(!(t=t.call(n,m)))throw TypeError("iterator result is not an object");if(!t.done)return t;m=t.value,o<2&&(o=0)}else 1===o&&(t=n["return"])&&t.call(n),o<2&&(m=TypeError("The iterator does not provide a '"+s+"' method"),o=1);n=e}else if((t=(u=d.n<0)?m:a.call(r,d))!==i)break}catch(t){n=e,o=1,m=t}finally{c=1}}return{value:t,done:u}}}(a,s,n),!0),l}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),p=u.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,o(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=u,o(p,"constructor",u),o(u,"constructor",l),l.displayName="GeneratorFunction",o(u,s,"GeneratorFunction"),o(p),o(p,s,"Generator"),o(p,r,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(m=function(){return{w:n,m:v}})()}function c(e,t,a,r,s,n,i){try{var o=e[n](i),m=o.value}catch(e){return void a(e)}o.done?t(m):Promise.resolve(m).then(r,s)}function l(e){return function(){var t=this,a=arguments;return new Promise(function(r,s){var n=e.apply(t,a);function i(e){c(n,r,s,i,o,"next",e)}function o(e){c(n,r,s,i,o,"throw",e)}i(void 0)})}}a(28706),a(2008),a(50113),a(48980),a(23418),a(62062),a(38781),a(31415),a(47764),a(68156),a(42762),a(23500),a(62953);var u=a(20931),d=a(13968),p={name:"DebateEventDetails",components:{PageHeaderWrapper:u.sm},data:function(){return{event:{},teams:[],debateTopics:[],debateTopic:{topic:"",proPosition:"",conPosition:""},rules:{openingProTime:2,openingConTime:2,crossExaminationTime:2,freeDebateTime:5,summaryProTime:3,summaryConTime:3,qaTime:3,openingTime:3,freeDebateTimeOld:15,summaryTime:3},totalTime:0,teamModalVisible:!1,currentTeam:null,teamForm:this.$form.createForm(this)}},computed:{teamColumns:function(){var e=this;return[{title:"轮数",key:"round",scopedSlots:{customRender:"round"},width:100,sorter:function(t,a){var r=e.getTeamTopic(t.name)?e.getTeamTopic(t.name).round:0,s=e.getTeamTopic(a.name)?e.getTeamTopic(a.name).round:0;return r-s},defaultSortOrder:"ascend"},{title:"队伍编码",dataIndex:"order",key:"order",width:100,sorter:function(e,t){return e.order-t.order}},{title:"队伍名称",dataIndex:"name",key:"name",width:150,sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"队伍类型",dataIndex:"type",key:"type",width:100,customRender:function(e){return"pro"===e?"正方":"反方"},filters:[{text:"正方",value:"pro"},{text:"反方",value:"con"}],onFilter:function(e,t){return 0===t.type.indexOf(e)}},{title:"队长",dataIndex:"leader",key:"leader",width:120},{title:"辩手信息",dataIndex:"members",key:"members",scopedSlots:{customRender:"members"},width:300},{title:"队伍口号",dataIndex:"slogan",key:"slogan",scopedSlots:{customRender:"slogan"},width:200},{title:"对应辩题",key:"topic",scopedSlots:{customRender:"topic"},width:250},{title:"操作",key:"actions",scopedSlots:{customRender:"actions"},width:120,fixed:"right"}]},debateTopicColumns:function(){return[{title:"轮数",dataIndex:"round",key:"round",width:80,sorter:function(e,t){return e.round-t.round},defaultSortOrder:"ascend"},{title:"正方队伍",key:"proTeam",scopedSlots:{customRender:"proTeam"},width:200},{title:"反方队伍",key:"conTeam",scopedSlots:{customRender:"conTeam"},width:200},{title:"辩题",key:"topic",scopedSlots:{customRender:"topic"},width:300}]},canStartEvent:function(){return this.teams.length>=2&&this.debateTopics.length>0&&this.rules.openingTime}},mounted:function(){var e=this;return l(m().m(function t(){return m().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.fetchData();case 1:e.updateTotalTime();case 2:return t.a(2)}},t)}))()},methods:{fetchData:function(){var e=this;return l(m().m(function t(){var a;return m().w(function(t){while(1)switch(t.n){case 0:try{e.event=(0,i.A)({},d.A.event),a=new Set,d.A.debateTopics.forEach(function(e){a.add(e.proTeam),a.add(e.conTeam)}),e.teams=Array.from(a).map(function(e){for(var t=[],a=1;a<=4;a++)e.members[a]&&t.push({name:e.members[a].name,role:e.members[a].role,member:e.members[a].member});return(0,i.A)((0,i.A)({},e),{},{members:t})}),e.debateTopics=(0,n.A)(d.A.debateTopics)}catch(r){e.$message.error("获取数据失败")}case 1:return t.a(2)}},t)}))()},getStatusText:function(e){var t={upcoming:"即将开始",ongoing:"进行中",completed:"已结束",cancelled:"已取消"};return t[e]||"未知"},getStatusColor:function(e){var t={upcoming:"blue",ongoing:"orange",completed:"green",cancelled:"red"};return t[e]||"default"},formatDate:function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},getTeamTopic:function(e){var t=this.debateTopics.find(function(t){return t.proTeamName===e||t.conTeamName===e});return t||null},showAddTeamModal:function(){this.currentTeam=null,this.teamForm.resetFields(),this.teamModalVisible=!0},editTeam:function(e){this.currentTeam=(0,i.A)({},e),this.teamForm.setFieldsValue({name:e.name,type:e.type,leader:e.leader,member1:e.members&&e.members[0]?e.members[0].member:"",member2:e.members&&e.members[1]?e.members[1].member:"",member3:e.members&&e.members[2]?e.members[2].member:"",member4:e.members&&e.members[3]?e.members[3].member:"",slogan:e.slogan}),this.teamModalVisible=!0},handleTeamModalOk:function(){var e=this;this.teamForm.validateFields(function(t,a){if(!t){var r=[{name:"一辩",role:"1",member:a.member1},{name:"二辩",role:"2",member:a.member2},{name:"三辩",role:"3",member:a.member3},{name:"四辩",role:"4",member:a.member4}].filter(function(e){return""!==e.member.trim()}),s={name:a.name,type:a.type,leader:a.leader,members:r,slogan:a.slogan};if(e.currentTeam){var n=e.teams.findIndex(function(t){return t.id===e.currentTeam.id});-1!==n&&(e.teams[n]=(0,i.A)((0,i.A)({},e.currentTeam),s))}else{var o=(0,i.A)({id:e.teams.length+1},s);e.teams.push(o)}e.teamModalVisible=!1,e.currentTeam=null,e.$message.success(e.currentTeam?"队伍更新成功":"队伍添加成功")}})},handleTeamModalCancel:function(){this.teamModalVisible=!1,this.currentTeam=null},removeTeam:function(e){this.teams=this.teams.filter(function(t){return t.id!==e}),this.$message.success("队伍删除成功")},saveRules:function(){this.$message.success("规则设置保存成功")},startEvent:function(){this.event.status="ongoing",this.$message.success("赛事已开始"),this.$router.push({name:"Bigscreen"})},updateTotalTime:function(){this.totalTime=this.rules.openingProTime+this.rules.openingConTime+4*this.rules.crossExaminationTime+2*this.rules.freeDebateTime+this.rules.summaryProTime+this.rules.summaryConTime+this.rules.qaTime},applyStandardConfig:function(){this.rules=(0,i.A)((0,i.A)({},this.rules),{},{openingProTime:2,openingConTime:2,crossExaminationTime:2,freeDebateTime:5,summaryProTime:3,summaryConTime:3,qaTime:3}),this.updateTotalTime(),this.$message.success("已应用标准配置")},applyCustomConfig:function(){this.$message.info("当前配置已应用")},resetConfig:function(){this.rules=(0,i.A)((0,i.A)({},this.rules),{},{openingProTime:2,openingConTime:2,crossExaminationTime:2,freeDebateTime:5,summaryProTime:3,summaryConTime:3,qaTime:3}),this.updateTotalTime(),this.$message.success("已重置为默认配置")}}},v=p,f=a(81656),g=(0,f.A)(v,r,s,!1,null,"5ccb19fb",null),T=g.exports}}]);